<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>정상분기 보고</title>
  <style>
    body {
      font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
      padding: 20px;
      background-color: #ffffff;
      color: #333;
    }

    h2 {
      color: #5f0080;
    }

    label {
      font-weight: bold;
      margin-top: 12px;
      display: block;
    }

    input, textarea {
      font-size: 16px;
      padding: 8px;
      margin: 6px 0;
      width: 100%;
      max-width: 400px;
      box-sizing: border-box;
    }

    .result-box {
      background-color: #faf5ff;
      border: 1px solid #5f0080;
      padding: 15px;
      margin-top: 20px;
      white-space: pre-wrap;
      font-weight: bold;
      color: #5f0080;
    }

    button {
      background-color: #5f0080;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background-color: #7a1fb5;
    }

    .copy-success {
      color: green;
      margin-top: 10px;
      display: none;
      font-weight: bold;
    }

    .suit-ref {
      margin-bottom: 12px;
      font-size: 15px;
      color: #666;
    }

    .input-set {
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <h2>정상분기 보고</h2>

  <div class="suit-ref">※ 슈트 번호 참조:  
    1=Y, 2=Y, 3=U, 4=H, 5=M, 6=H, 7=PT, 8=CS, 9=GW, 10=DJ, 11=CA, 12=JE, 13=CJ롯데, 14=CJ롯데
  </div>

  <label for="countInput">정상분기 건수</label>
  <input type="number" id="countInput" min="1" max="10" placeholder="예: 3" />

  <div id="suitInputs"></div>

  <label for="rejInput">오분기 슈트</label>
  <input type="text" id="rejInput" placeholder="예: 리젝" />

  <label for="timeInput">발생시각</label>
  <input type="text" id="timeInput" placeholder="예: 23:10" />

  <label for="mentionInput">멘션 수정 가능 영역</label>
  <textarea id="mentionInput" rows="5">@손종선[평택HUB] @신직호[평택HUB_분류] @김남일[평택 HUB _ SIOC] @권미선[평택HUB_SIOC] @홍지호 [FC자동화설비]</textarea>

  <div class="result-box" id="resultText">
정상분기건 ○건 발생하였습니다.
지시 슈트 : ○번 ○권역 N건
오분기 슈트 : ○○
발생시각 : ○○:○○ 분경

@손종선[평택HUB] ...
  </div>

  <button onclick="copyText()">복사하기</button>
  <div class="copy-success" id="copySuccess">복사되었습니다!</div>

  <script>
    const countInput = document.getElementById('countInput');
    const suitInputsDiv = document.getElementById('suitInputs');
    const rejInput = document.getElementById('rejInput');
    const timeInput = document.getElementById('timeInput');
    const mentionInput = document.getElementById('mentionInput');
    const resultText = document.getElementById('resultText');
    const copySuccess = document.getElementById('copySuccess');

    const MAX_FIELDS = 10;

    countInput.addEventListener('input', updateFields);
    suitInputsDiv.addEventListener('input', updateResult);
    rejInput.addEventListener('input', updateResult);
    timeInput.addEventListener('input', updateResult);
    mentionInput.addEventListener('input', updateResult);

    function updateFields() {
      const count = parseInt(countInput.value) || 0;
      suitInputsDiv.innerHTML = '';

      const limited = Math.min(count, MAX_FIELDS);
      for (let i = 0; i < limited; i++) {
        const group = document.createElement('div');
        group.className = 'input-set';
        group.innerHTML = `
          <label>지시 슈트 ${i + 1}</label>
          <input type="text" class="suitNum" placeholder="예: 2" />
          <input type="text" class="suitRegion" placeholder="권역 예: Y" />
          <input type="number" class="suitCount" min="1" placeholder="건수 예: 1" />
        `;
        suitInputsDiv.appendChild(group);
      }

      updateResult();
    }

    function updateResult() {
      const count = countInput.value || '○';
      const suitNums = suitInputsDiv.querySelectorAll('.suitNum');
      const suitRegions = suitInputsDiv.querySelectorAll('.suitRegion');
      const suitCounts = suitInputsDiv.querySelectorAll('.suitCount');

      const details = [];
      for (let i = 0; i < suitNums.length; i++) {
        const num = suitNums[i].value || '○';
        const region = suitRegions[i].value || '○';
        const scount = suitCounts[i].value || 'N';
        details.push(`${num}번 ${region}권역 ${scount}건`);
      }

      const suitsLine = details.length > 0 ? `지시 슈트 : ${details.join(' / ')}` : '지시 슈트 : ○번 ○권역 N건';
      const rej = rejInput.value || '○○';
      const time = timeInput.value || '○○:○○';
      const mentions = mentionInput.value;

      resultText.textContent = `정상분기건 ${count}건 발생하였습니다.\n${suitsLine}\n오분기 슈트 : ${rej}\n발생시각 : ${time} 분경\n\n${mentions}`;
    }

    function copyText() {
      const text = resultText.textContent;
      navigator.clipboard.writeText(text).then(() => {
        copySuccess.style.display = 'block';
        setTimeout(() => {
          copySuccess.style.display = 'none';
        }, 2000);
      });
    }

    updateFields();
  </script>
</body>
</html>
